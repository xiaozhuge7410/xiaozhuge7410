webpackJsonp([2],{0:function(e,t){function a(){this.init()}a.prototype={init:function(){this.domRender(),this.bindEvent()},domRender:function(){var e=window.localStorage.getItem("localSidebarDom"),t=window.localStorage.getItem("localheaderDom");null==e?(this.sidebarDomRender(),this.locationSetActive()):($(".page-sidebar-wrapper").html(""),$(e).appendTo(".page-sidebar-wrapper"),$(".page-sidebar").hasClass("closed")?$(".page-content").addClass("open"):$(".page-content").removeClass("open"),this.locationSetActive()),null==t?this.headerDomRender():($(".page-header").html(""),$(t).appendTo(".page-header")),this.footerDomRender()},headerDomRender:function(){$('<div class="page-header-inner "><div class="page-logo"><a href="../report/common.html"><img src="../../img/logo.png" alt="logo" class="logo-default"></a><div class="menu-toggler"><i class="fa fa-bars" style="color:#fff;font-size:2rem;"></i></div></div><div class="build-version">科研版</div><div class="welcome-func"><ul class="welcome-func-list"><li class="welcome-user"><img alt="" class="welcome-userimg img-circle" src="../../img/avatar_default.png"><span class="welcome-username"></span><ul class="welcome-user-menu"><li><i class="fa fa-question-circle"></i><a href="#">帮助</a></li><li class="logout-btn"><i class="fa fa-sign-out"></i><a href="../login.html">登出</a></li></ul></li></ul></div></div>').appendTo(".page-header"),this.getWelcomeInfo()},sidebarDomRender:function(){for(var e=[{icon:"icon-bar-chart",title:"运动报告管理",link:"#",permission:[1,2,3],childItem:[{link:"../report/common.html",title:"常规运动报告"},{link:"../report/aerobic.html",title:"515有氧能力测试报告"},{link:"../report/rockport.html",title:"Rockport测试报告"},{link:"../report/4min_walk.html",title:"跑步机四分钟走测试报告"}]},{icon:"icon-users",title:"客户管理",link:"#",permission:[1,2,3],childItem:[{link:"../customer/info.html",title:"客户信息"}]},{icon:"icon-pie-chart",title:"数据统计",link:"#",permission:[2],childItem:[{link:"../stats/stats.html",title:"数据统计报告"}]}],t=parseInt(window.localStorage.getItem("auClinic")),a=0;a<e.length;a++)if(-1!=e[a].permission.indexOf(t)){for(var i="",n=0;n<e[a].childItem.length;n++)i=i+'<li class="nav-item"><a href="'+e[a].childItem[n].link+'" class="nav-link "><span class="title">'+e[a].childItem[n].title+"</span></a></li>";if(0==e[a].childItem.length)var s='<li class="nav-item"><a href="'+e[a].link+'" class="nav-link nav-toggle"><i class="'+e[a].icon+'"></i><span class="title">'+e[a].title+"</span></a></li>";else var s='<li class="nav-item"><a href="'+e[a].link+'" class="nav-link nav-toggle"><i class="'+e[a].icon+'"></i><span class="title">'+e[a].title+'</span><span class="arrow"></span></a><ul class="sub-menu">'+i+"</ul></li>";$(s).appendTo(".page-sidebar-menu")}window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())},footerDomRender:function(){$('<div class="page-footer-inner">2016 &copy; 加动健康科技（深圳）有限公司</div><div class="scroll-to-top"><i class="icon-arrow-up"></i></div>').appendTo(".page-footer")},getWelcomeInfo:function(){var e=window.localStorage.getItem("userImgUrlClinic"),t=window.localStorage.getItem("userNickNameClinic");"undefined"==e||"null"==e?$(".welcome-userimg").attr("src","../../img/avatar_default.png"):$(".welcome-userimg").attr("src",e),"undefined"==t||"null"==t?$(".welcome-username").text("管理员"):$(".welcome-username").text(t)},bindEvent:function(){$(".page-sidebar-menu>li>a").on("click",function(e){e.preventDefault()}),$(".page-sidebar-menu>li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open"):($(".page-sidebar-menu>li").removeClass("open"),$(this).addClass("open")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-sidebar-menu>li .sub-menu>li").on("click",function(e){e.stopPropagation(),$(this).hasClass("active")||($(this).parents().find(".page-sidebar-menu>li>ul>li").removeClass("active"),$(this).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-logo .menu-toggler").on("click",function(){$(".page-sidebar").hasClass("closed")?($(".page-sidebar").removeClass("closed"),$(".page-content").removeClass("open"),$(".page-footer").removeClass("open"),$(".page-logo").removeClass("closed")):($(".page-sidebar").addClass("closed"),$(".page-content").addClass("open"),$(".page-footer").addClass("open"),$(".page-logo").addClass("closed")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html()),window.localStorage.setItem("localheaderDom",$(".page-header").html())}),$(".logout-btn").on("click",function(){window.localStorage.clear()})},locationSetActive:function(){-1!=window.location.href.indexOf("common")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("aerobic")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(1).addClass("active")),-1!=window.location.href.indexOf("rockport")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(2).addClass("active")),-1!=window.location.href.indexOf("4min_walk")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(3).addClass("active")),-1!=window.location.href.indexOf("info")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(1).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(1).find(".sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("stats")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(2).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(2).find(".sub-menu li").eq(0).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}},new a},21:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n=(a.n(i),a(1)),s=(a.n(n),a(2));a.n(s);new Vue({el:"#app",data:{stats:{totalPeople:[],sex:[{sex:0,count:0},{sex:1,count:0}],age:[],metDistribution:[],metChange:[],weightChange:[],bloodSugarChange:[],reportStats:[],joinFourMinTimes:[],testStage:[]},sexPercent:[0,0],metDistributionPercent:[0,0,0],metChangePercent:[0,0,0],weightChangePercent:[0,0,0],bloodSugarChangePercent:[0,0,0],sexShow:!0,metChangeShow:!0,weightChangeShow:!0,bloodSugarChangeShow:!0},methods:{getData:function(){var e=this,t=window.localStorage.getItem("uidClinic"),a=window.localStorage.getItem("utClinic"),i={userId:t};$.ajax({url:window.urlHandler("statistical/getData",t,a),method:"post",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){200==t.status&&(e.stats=t.data,e.handleCharts()),window.dataErrorHandler(t)}).fail(function(e){swal({title:"提示",text:"请求失败！",type:"info",showConfirmButton:!1,timer:1500})})},handleCharts:function(){this.createSexChart(),this.createAgeChart(),this.createAerobicDistributionChart(),this.createMetChangeChart(),this.createWeightChangeChart(),this.createMbgChangeChart(),this.createJoinInChart(),this.createTestStageChart()},createSexChart:function(){var e=this.stats.sex[0].count+this.stats.sex[1].count;e>0?(this.sexPercent[0]=(this.stats.sex[0].count/e*100).toFixed(1),this.sexPercent[1]=(this.stats.sex[1].count/e*100).toFixed(1),this.sexChart=new Highcharts.Chart({chart:{renderTo:"sex-chart",spacing:5},credits:{enabled:!1},title:{floating:!0,text:"总数",style:{fontSize:"16px"}},subtitle:{floating:!0,text:e+"人",style:{fontSize:"16px",color:"#000"}},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',useHTML:!0,pointFormat:'<p style="margin:0;">比例: {point.percentage:.1f}%</p><p style="margin:0;">人数: {point.y}人</p>'},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!1}}},series:[{type:"pie",innerSize:"70%",name:"性别",borderWidth:0,colors:["#5B99CF","#ED737B"],data:[{name:"男",y:this.stats.sex[1].count},{name:"女",y:this.stats.sex[0].count}]}]},function(e){var t=e.series[0].center[1],a=parseInt(e.title.styles.fontSize);e.setTitle({y:t-a/2},{y:t+a/2+6}),this.sexChart=e})):this.sexShow=!1},createAgeChart:function(){var e=this.stats.age,t=(Math.max.apply(null,e)/.8).toFixed(0);t<10&&(t=10);for(var a=0,i=0;i<e.length;i++)a+=e[i];this.ageChart=new Highcharts.Chart({chart:{type:"column",renderTo:"age-chart",spacing:[5,0,0,0]},title:{text:"人数",align:"left",style:{fontSize:"12px",fontWeight:"400"}},credits:{enabled:!1},legend:{enabled:!1},xAxis:{tickWidth:0,lineColor:"#B6B6B6",categories:["20岁以下","20-29岁","30-39岁","40-49岁","50-59岁","60岁以上"],labels:{style:{color:"#4E4E4E",fontSize:"12px"}}},yAxis:{lineWidth:1,lineColor:"#B6B6B6",min:0,max:t,tickPositions:[0,Math.round(t/5),Math.round(t/5*2),Math.round(t/5*3),Math.round(t/5*4),Math.round(t)],gridLineDashStyle:"dash",gridLineColor:"#DEDEE0",title:{text:null},labels:{style:{color:"#4E4E4E",fontSize:"12px"}}},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',pointFormatter:function(){return'<p style="margin:0;">人数:'+this.y+'人</p><p style="margin:0;">占比: '+(this.y/a*100).toFixed(1)+"%</p>"},useHTML:!0},series:[{name:"人数",color:"#89BAE4",data:e}]})},createAerobicDistributionChart:function(){var e=this.stats.metDistribution,t=(Math.max.apply(null,e)/.8).toFixed(0);t<10&&(t=10);for(var a=0,i=0;i<e.length;i++)a+=e[i];this.metDistributionPercent=[(this.stats.metDistribution[0]/a*100).toFixed(1),(this.stats.metDistribution[1]/a*100).toFixed(1),(this.stats.metDistribution[2]/a*100).toFixed(1)],this.aerobicDistributionChart=new Highcharts.Chart({chart:{type:"column",renderTo:"aerobic-distribution-chart",spacing:[5,0,0,0]},title:{text:"人数",align:"left",style:{fontSize:"12px",fontWeight:"400"}},credits:{enabled:!1},legend:{enabled:!1},xAxis:{tickWidth:0,lineColor:"#B6B6B6",categories:["9MET以下","9-12MET","12MET以上"],labels:{style:{color:"#4E4E4E",fontSize:"12px"}}},yAxis:{lineWidth:1,lineColor:"#B6B6B6",min:0,max:t,tickPositions:[0,Math.round(t/5),Math.round(t/5*2),Math.round(t/5*3),Math.round(t/5*4),Math.round(t)],gridLineDashStyle:"dash",gridLineColor:"#DEDEE0",title:{text:null},labels:{style:{color:"#4E4E4E",fontSize:"12px"}}},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',pointFormatter:function(){return'<p style="margin:0;">人数:'+this.y+'人</p><p style="margin:0;">占比: '+(this.y/a*100).toFixed(1)+"%</p>"},useHTML:!0},series:[{name:"人数",color:"#44BEBA",data:e}]})},createMetChangeChart:function(){for(var e=this.stats.metChange,t=0,a=0;a<e.length;a++)t+=e[a];t>0?(this.metChangePercent=[(this.stats.metChange[0]/t*100).toFixed(1),(this.stats.metChange[1]/t*100).toFixed(1),(this.stats.metChange[2]/t*100).toFixed(1)],this.metChangeChart=new Highcharts.Chart({chart:{renderTo:"met-change-chart",spacing:5},credits:{enabled:!1},title:{text:null},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',useHTML:!0,pointFormat:'<p style="margin:0;">比例: {point.percentage:.1f}%</p><p style="margin:0;">人数: {point.y}人</p>'},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!1},events:{click:function(e){window.location.href=e.point.url}}}},series:[{type:"pie",innerSize:"70%",name:"有氧能力",borderWidth:0,colors:["#BBCFE1","#6893BB","#316AA0"],data:[{name:"有氧能力降低",y:e[0],url:"./info_statistics.html?metChange=1"},{name:"有氧能力提高",y:e[1],url:"./info_statistics.html?metChange=2"},{name:"有氧能力变化不明显",y:e[2],url:"./info_statistics.html?metChange=3"}]}]})):this.metChangeShow=!1},createWeightChangeChart:function(){for(var e=this.stats.weightChange,t=0,a=0;a<e.length;a++)t+=e[a];t>0?(this.weightChangePercent=[(this.stats.weightChange[0]/t*100).toFixed(1),(this.stats.weightChange[1]/t*100).toFixed(1),(this.stats.weightChange[2]/t*100).toFixed(1)],this.weightChangeChart=new Highcharts.Chart({chart:{renderTo:"weight-change-chart",spacing:5},credits:{enabled:!1},title:{text:null},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',useHTML:!0,pointFormat:'<p style="margin:0;">比例: {point.percentage:.1f}%</p><p style="margin:0;">人数: {point.y}人</p>'},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!1},events:{click:function(e){window.location.href=e.point.url}}}},series:[{type:"pie",innerSize:"70%",name:"体重",borderWidth:0,colors:["#AEDDE1","#63BDC4","#11929E"],data:[{name:"体重减少",y:e[0],url:"./info_statistics.html?weightChange=1"},{name:"体重增加",y:e[1],url:"./info_statistics.html?weightChange=2"},{name:"体重变化不明显",y:e[2],url:"./info_statistics.html?weightChange=3"}]}]})):this.weightChangeShow=!1},createMbgChangeChart:function(){for(var e=this.stats.bloodSugarChange,t=0,a=0;a<e.length;a++)t+=e[a];t>0?(this.bloodSugarChangePercent=[(this.stats.bloodSugarChange[0]/t*100).toFixed(1),(this.stats.bloodSugarChange[1]/t*100).toFixed(1),(this.stats.bloodSugarChange[2]/t*100).toFixed(1)],this.mbgChangeChart=new Highcharts.Chart({chart:{renderTo:"mbg-change-chart",spacing:5},credits:{enabled:!1},title:{text:null},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',useHTML:!0,pointFormat:'<p style="margin:0;">比例: {point.percentage:.1f}%</p><p style="margin:0;">人数: {point.y}人</p>'},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!1},events:{click:function(e){window.location.href=e.point.url}}}},series:[{type:"pie",innerSize:"70%",name:"血糖",borderWidth:0,colors:["#F5C1C1","#E77676","#DD4242"],data:[{name:"血糖降低",y:e[0],url:"./info_statistics.html?bloodSugarChange=1"},{name:"血糖升高",y:e[1],url:"./info_statistics.html?bloodSugarChange=2"},{name:"血糖变化不明显",y:e[2],url:"./info_statistics.html?bloodSugarChange=3"}]}]})):this.bloodSugarChangeShow=!1},createJoinInChart:function(){var e=this.stats.joinFourMinTimes,t=(Math.max.apply(null,e)/.8).toFixed(0);t<10&&(t=10);for(var a=0,i=0;i<e.length;i++)a+=e[i];this.joinInChart=new Highcharts.Chart({chart:{type:"column",renderTo:"join-in-chart",spacing:[5,0,0,18]},title:{text:"人数",align:"left",style:{fontSize:"12px",fontWeight:"400"}},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}},xAxis:{tickWidth:0,lineColor:"#B6B6B6",categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","14以上"],labels:{style:{color:"#717171",fontSize:"12px"}}},yAxis:{lineWidth:1,lineColor:"#B6B6B6",min:0,max:t,tickPositions:[0,Math.round(t/5),Math.round(t/5*2),Math.round(t/5*3),Math.round(t/5*4),Math.round(t)],gridLineDashStyle:"dash",gridLineColor:"#DEDEE0",title:{text:null},labels:{style:{color:"#717171",fontSize:"12px"}}},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}次</p>',pointFormatter:function(){return'<p style="margin:0;">人数:'+this.y+'人</p><p style="margin:0;">占比: '+(this.y/a*100).toFixed(1)+"%</p>"},useHTML:!0},series:[{name:"人数",color:"#56A3D2",data:e}]})},createTestStageChart:function(){var e=this.stats.testStage,t=(Math.max.apply(null,e)/.8).toFixed(0);t<10&&(t=10);for(var a=0,i=0;i<e.length;i++)a+=e[i];this.testStageChart=new Highcharts.Chart({chart:{type:"column",renderTo:"test-stage-chart",spacing:[10,0,5,18]},title:{text:"人数",align:"left",style:{fontSize:"12px",fontWeight:"400"}},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}},xAxis:{tickWidth:0,lineColor:"#B6B6B6",categories:["筛选测试阶段0周","筛选测试阶段2周","筛选测试阶段4周","试验测试阶段0周","试验测试阶段2周","试验测试阶段4周","试验测试阶段6周","试验测试阶段8周","试验测试阶段10周","试验测试阶段12周","试验测试阶段14周","试验测试阶段16周","试验测试阶段18周","试验测试阶段20周","试验测试阶段22周","试验测试阶段24周"],labels:{rotation:-50,style:{color:"#717171",fontSize:"12px"}}},yAxis:{lineWidth:1,lineColor:"#B6B6B6",min:0,max:t,tickPositions:[0,Math.round(t/5),Math.round(t/5*2),Math.round(t/5*3),Math.round(t/5*4),Math.round(t)],gridLineDashStyle:"dash",gridLineColor:"#DEDEE0",title:{text:null},labels:{style:{color:"#717171",fontSize:"12px"}}},tooltip:{headerFormat:'<p style="margin:0 0 10px 0;">{point.key}</p>',pointFormatter:function(){return'<p style="margin:0;">人数:'+this.y+'人</p><p style="margin:0;">占比: '+(this.y/a*100).toFixed(1)+"%</p>"},useHTML:!0},series:[{name:"人数",color:"#67BFC6",data:e}]})}},created:function(){this.getData()},mounted:function(){}})},42:function(e,t,a){e.exports=a(21)}},[42]);