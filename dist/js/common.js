webpackJsonp([9],{0:function(e,a){function t(){this.init()}t.prototype={init:function(){this.domRender(),this.bindEvent()},domRender:function(){var e=window.localStorage.getItem("localSidebarDom"),a=window.localStorage.getItem("localheaderDom");null==e?(this.sidebarDomRender(),this.locationSetActive()):($(".page-sidebar-wrapper").html(""),$(e).appendTo(".page-sidebar-wrapper"),$(".page-sidebar").hasClass("closed")?$(".page-content").addClass("open"):$(".page-content").removeClass("open"),this.locationSetActive()),null==a?this.headerDomRender():($(".page-header").html(""),$(a).appendTo(".page-header")),this.footerDomRender()},headerDomRender:function(){$('<div class="page-header-inner "><div class="page-logo"><a href="../report/common.html"><img src="../../img/logo.png" alt="logo" class="logo-default"></a><div class="menu-toggler"><i class="fa fa-bars" style="color:#fff;font-size:2rem;"></i></div></div><div class="build-version">科研版</div><div class="welcome-func"><ul class="welcome-func-list"><li class="welcome-user"><img alt="" class="welcome-userimg img-circle" src="../../img/avatar_default.png"><span class="welcome-username"></span><ul class="welcome-user-menu"><li><i class="fa fa-question-circle"></i><a href="#">帮助</a></li><li class="logout-btn"><i class="fa fa-sign-out"></i><a href="../login.html">登出</a></li></ul></li></ul></div></div>').appendTo(".page-header"),this.getWelcomeInfo()},sidebarDomRender:function(){for(var e=[{icon:"icon-bar-chart",title:"运动报告管理",link:"#",permission:[1,2,3],childItem:[{link:"../report/common.html",title:"常规运动报告"},{link:"../report/aerobic.html",title:"515有氧能力测试报告"},{link:"../report/rockport.html",title:"Rockport测试报告"},{link:"../report/4min_walk.html",title:"跑步机四分钟走测试报告"}]},{icon:"icon-users",title:"客户管理",link:"#",permission:[1,2,3],childItem:[{link:"../customer/info.html",title:"客户信息"}]},{icon:"icon-pie-chart",title:"数据统计",link:"#",permission:[2],childItem:[{link:"../stats/stats.html",title:"数据统计报告"}]}],a=parseInt(window.localStorage.getItem("auClinic")),t=0;t<e.length;t++)if(-1!=e[t].permission.indexOf(a)){for(var i="",o=0;o<e[t].childItem.length;o++)i=i+'<li class="nav-item"><a href="'+e[t].childItem[o].link+'" class="nav-link "><span class="title">'+e[t].childItem[o].title+"</span></a></li>";if(0==e[t].childItem.length)var n='<li class="nav-item"><a href="'+e[t].link+'" class="nav-link nav-toggle"><i class="'+e[t].icon+'"></i><span class="title">'+e[t].title+"</span></a></li>";else var n='<li class="nav-item"><a href="'+e[t].link+'" class="nav-link nav-toggle"><i class="'+e[t].icon+'"></i><span class="title">'+e[t].title+'</span><span class="arrow"></span></a><ul class="sub-menu">'+i+"</ul></li>";$(n).appendTo(".page-sidebar-menu")}window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())},footerDomRender:function(){$('<div class="page-footer-inner">2016 &copy; 加动健康科技（深圳）有限公司</div><div class="scroll-to-top"><i class="icon-arrow-up"></i></div>').appendTo(".page-footer")},getWelcomeInfo:function(){var e=window.localStorage.getItem("userImgUrlClinic"),a=window.localStorage.getItem("userNickNameClinic");"undefined"==e||"null"==e?$(".welcome-userimg").attr("src","../../img/avatar_default.png"):$(".welcome-userimg").attr("src",e),"undefined"==a||"null"==a?$(".welcome-username").text("管理员"):$(".welcome-username").text(a)},bindEvent:function(){$(".page-sidebar-menu>li>a").on("click",function(e){e.preventDefault()}),$(".page-sidebar-menu>li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open"):($(".page-sidebar-menu>li").removeClass("open"),$(this).addClass("open")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-sidebar-menu>li .sub-menu>li").on("click",function(e){e.stopPropagation(),$(this).hasClass("active")||($(this).parents().find(".page-sidebar-menu>li>ul>li").removeClass("active"),$(this).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-logo .menu-toggler").on("click",function(){$(".page-sidebar").hasClass("closed")?($(".page-sidebar").removeClass("closed"),$(".page-content").removeClass("open"),$(".page-footer").removeClass("open"),$(".page-logo").removeClass("closed")):($(".page-sidebar").addClass("closed"),$(".page-content").addClass("open"),$(".page-footer").addClass("open"),$(".page-logo").addClass("closed")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html()),window.localStorage.setItem("localheaderDom",$(".page-header").html())}),$(".logout-btn").on("click",function(){window.localStorage.clear()})},locationSetActive:function(){-1!=window.location.href.indexOf("common")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("aerobic")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(1).addClass("active")),-1!=window.location.href.indexOf("rockport")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(2).addClass("active")),-1!=window.location.href.indexOf("4min_walk")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(3).addClass("active")),-1!=window.location.href.indexOf("info")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(1).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(1).find(".sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("stats")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(2).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(2).find(".sub-menu li").eq(0).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}},new t},30:function(e,a,t){e.exports=t(9)},9:function(e,a,t){"use strict";function i(){this.ajaxLoading=!1,this.init()}Object.defineProperty(a,"__esModule",{value:!0});var o=t(0),n=(t.n(o),t(1)),l=(t.n(n),t(2));t.n(l);i.prototype.init=function(){null==window.localStorage.getItem("utClinic")?($("html,body").html(""),window.location.href="../login.html"):(this.requestPage(),this.bind())},i.prototype.bind=function(){var e=this;$(".start-date-form").daterangepicker({autoUpdateInput:!1,singleDatePicker:!0,maxDate:new Date,locale:{applyLabel:"确定",cancelLabel:"清空",fromLabel:"起始时间",toLabel:"结束时间",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}}),$(".start-date-form").on("apply.daterangepicker",function(a,t){e.stDate=t.startDate,$(this).find("input").val(t.startDate.format("YYYY-MM-DD")),window.localStorage.setItem("startTime",$(this).find("input").val()+" 00:00:00"),$(this).find(".fa-close").show(),$(".end-date-form").daterangepicker({autoUpdateInput:!1,singleDatePicker:!0,minDate:t.startDate._d,maxDate:new Date,locale:{applyLabel:"确定",cancelLabel:"清空",fromLabel:"起始时间",toLabel:"结束时间",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}}),$(".end-date-form").on("apply.daterangepicker",function(e,a){$(this).find("input").val(a.endDate.format("YYYY-MM-DD")),window.localStorage.setItem("endTime",$(this).find("input").val()+" 23:59:59"),$(this).find(".fa-close").show()}),$(".end-date-form i.fa-close").on("click",function(){$(this).parent().find("input").val(""),window.localStorage.removeItem("endTime"),$(this).hide()})}),$(".start-date-form i.fa-close").on("click",function(){$(this).parent().find("input").val(""),window.localStorage.removeItem("startTime"),$(this).hide()}),$(".search-commit-btn").on("click",function(){e.requestPage("",$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),"")}),$(".search-input").on("keyup",function(a){13==a.keyCode&&e.requestPage("",$(".search-input").val(),"")}),window.onbeforeunload=function(){window.localStorage.removeItem("startTime"),window.localStorage.removeItem("endTime"),e.resetSortType()},this.theadSortEvent()},i.prototype.requestPage=function(e,a,t,i,o){var n=this,l=window.localStorage.getItem("utClinic"),r=window.localStorage.getItem("uidClinic");this.ajaxLoading||(this.ajaxLoading=!0,$.ajax({url:window.urlHandler("motiondata/getAllUserSportInfo",r,l),method:"POST",data:{managerId:r,page:e,pageSize:o,condition:a,beginTime:t,endTime:i,sortType:window.localStorage.getItem("sortType")}}).done(function(e){200==e.status&&($(".table-manager").find("tbody").html(""),$(".pagination").html(""),$(".table-mask-box").show(),n.renderTable(e),n.initPagination(e.datas.list.pages)),n.ajaxLoading=!1,window.dataErrorHandler(e)}).fail(function(e){n.ajaxLoading=!1}))},i.prototype.renderTable=function(e){$(".table-mask-box").hide();var a=$(".table-manager").find("tbody"),t=e.datas.list.list;if(0==t.length){var i="<tr><td>无相关记录</td><td>--</td><td>--</td><td>--</td><td>--</td><td>--</td></tr>";$(i).appendTo(a),$(".pagination-block").hide()}else{for(var o=0;o<t.length;o++){var i="<tr><td>"+window.nullFormat(t[o].create_time)+"</td><td>"+t[o].nick_name+"</td><td>"+window.formatSex(t[o].sex)+"</td><td>"+t[o].age+"</td><td>"+t[o].motion_sum_time+"分钟</td>";null!=t[o].questionnaireRecordId?i+='<td><a class="report-detail" href="common_detail.html" data-recordId="'+t[o].questionnaireRecordId+'" data-reportid="'+t[o].sportId+'" data-customeruuid="'+t[o].uuid+'">报告</a><a class="recordid-detail" href="../customer/Survey_report_detail.html" data-recordId="'+t[o].questionnaireRecordId+'"></a></td>':i+='<td><a class="report-detail" href="common_detail.html" data-recordId="'+t[o].questionnaireRecordId+'" data-reportid="'+t[o].sportId+'" data-customeruuid="'+t[o].uuid+'">报告</a></td>',i+="</tr>",$(i).appendTo(a)}$(".pagination-block").show();var n=e.datas.list.pageNum;window.localStorage.setItem("pageNow",n)}},i.prototype.initPagination=function(e){$('<li class="pagination-prev"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>').appendTo($(".pagination")),this.pageLength=e;var a=parseInt(window.localStorage.getItem("pageNow"));if(e>5&&6!=e){if(a>=5&&a<=e-4){var t='<li><a href="#">1</a></li><li class="paitem-dot"><a href="#">...</a></li>';$(t).appendTo($(".pagination"));for(var i=a;i<a+3;i++){var o='<li><a href="#">'+i+"</a></li>";$(o).appendTo($(".pagination"))}var n='<li class="paitem-dot"><a href="#">...</a></li><li><a href="#">'+e+"</a></li>";$(n).appendTo($(".pagination"))}if(a<5){for(var i=1;i<=5;i++){var o='<li><a href="#">'+i+"</a></li>";$(o).appendTo($(".pagination"))}var n='<li class="paitem-dot"><a href="#">...</a></li><li><a href="#">'+e+"</a></li>";$(n).appendTo($(".pagination"))}if(a>=5&&a>e-4){var t='<li><a href="#">1</a></li><li class="paitem-dot"><a href="#">...</a></li>';$(t).appendTo($(".pagination"));for(var i=e-4;i<=e;i++){var o='<li><a href="#">'+i+"</a></li>";$(o).appendTo($(".pagination"))}}}else if(6==e)for(var i=1;i<=e;i++){var o='<li><a href="#">'+i+"</a></li>";$(o).appendTo($(".pagination"))}else for(var i=1;i<=e;i++){var o='<li><a href="#">'+i+"</a></li>";$(o).appendTo($(".pagination"))}$('<li class="pagination-next"><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>').appendTo($(".pagination")),this.paBind()},i.prototype.paBind=function(){var e=this;$(".pagination li").on("click",function(a){e.requestPage($(this).find("a").text(),$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize),a.preventDefault()}),$(".pagination li:first").off("click"),$(".pagination li:last").off("click"),$(".paitem-dot").off("click"),$(".pagination-prev").on("click",function(a){a.preventDefault();var t=window.localStorage.getItem("pageNow");1!=t?e.requestPage(parseInt(t)-1,$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize):swal({title:"提示",text:"已经是第一页了！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}),$(".pagination-next").on("click",function(a){a.preventDefault();var t=window.localStorage.getItem("pageNow");t!=e.pageLength?e.requestPage(parseInt(t)+1,$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize):swal({title:"提示",text:"已经是最后一页了！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}),$(".paitem-dot").on("click",function(e){e.preventDefault()}),$(".pagination li").each(function(){$(this).text()==window.localStorage.getItem("pageNow")&&$(this).addClass("active")}),$(".page-index").on("keyup",function(a){13==a.keyCode&&e.requestPage($(".page-index-input").val(),$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize),$(".page-index-input").val()>e.pageLength&&$(".page-index-input").val(e.pageLength)}),$(".page-index span").on("click",function(a){e.requestPage($(".page-index-input").val(),$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize)}),$(".pagesize-selector").on("change",function(a){e.pageSize=$(this).val(),e.requestPage($(".page-index-input").val(),$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize)}),$(".report-detail").on("click",function(){var e=$(this).attr("data-reportid"),a=$(this).attr("data-customeruuid");window.localStorage.setItem("reportId",e),window.localStorage.setItem("customerUUID",a);var t=$(this).attr("data-recordId");window.localStorage.setItem("data_recordId",t)}),$(".recordid-detail").on("click",function(){var e=$(this).attr("data-recordId");window.localStorage.setItem("data_recordId",e)})},i.prototype.resetSortType=function(){window.localStorage.removeItem("sortType")},i.prototype.theadSortEvent=function(){for(var e=this,a=["CREATE_TIME_DESC","NICK_NAME_DESC","SEX_DESC","AGE_DESC","SPORT_SUM_TIME_DESC"],t=["CREATE_TIME_ASC","NICK_NAME_ASC","SEX_ASC","AGE_ASC","SPORT_SUM_TIME_ASC"],i=0;i<a.length;i++)!function(i){$(".table-manager thead tr th").eq(i).off("click").on("click",function(){null==window.localStorage.getItem("sortType")?(window.localStorage.setItem("sortType",a[i]),e.requestPage("",$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort-desc")):window.localStorage.getItem("sortType")==t[i]?(e.resetSortType(),e.requestPage("",$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort")):window.localStorage.getItem("sortType")==a[i]?(window.localStorage.setItem("sortType",t[i]),e.requestPage("",$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort-asc"),$(this).addClass("down")):(window.localStorage.setItem("sortType",a[i]),e.requestPage("",$(".search-input").val(),window.localStorage.getItem("startTime"),window.localStorage.getItem("endTime"),e.pageSize),$(".table-manager thead tr th").find("i").removeClass().addClass("fa fa-sort"),$(this).find("i").addClass("fa fa-sort-desc"))})}(i)},new i}},[30]);