webpackJsonp([15],{0:function(e,a){function i(){this.init()}i.prototype={init:function(){this.domRender(),this.bindEvent()},domRender:function(){var e=window.localStorage.getItem("localSidebarDom"),a=window.localStorage.getItem("localheaderDom");null==e?(this.sidebarDomRender(),this.locationSetActive()):($(".page-sidebar-wrapper").html(""),$(e).appendTo(".page-sidebar-wrapper"),$(".page-sidebar").hasClass("closed")?$(".page-content").addClass("open"):$(".page-content").removeClass("open"),this.locationSetActive()),null==a?this.headerDomRender():($(".page-header").html(""),$(a).appendTo(".page-header")),this.footerDomRender()},headerDomRender:function(){$('<div class="page-header-inner "><div class="page-logo"><a href="../report/common.html"><img src="../../img/logo.png" alt="logo" class="logo-default"></a><div class="menu-toggler"><i class="fa fa-bars" style="color:#fff;font-size:2rem;"></i></div></div><div class="build-version">科研版</div><div class="welcome-func"><ul class="welcome-func-list"><li class="welcome-user"><img alt="" class="welcome-userimg img-circle" src="../../img/avatar_default.png"><span class="welcome-username"></span><ul class="welcome-user-menu"><li><i class="fa fa-question-circle"></i><a href="#">帮助</a></li><li class="logout-btn"><i class="fa fa-sign-out"></i><a href="../login.html">登出</a></li></ul></li></ul></div></div>').appendTo(".page-header"),this.getWelcomeInfo()},sidebarDomRender:function(){for(var e=[{icon:"icon-bar-chart",title:"运动报告管理",link:"#",permission:[1,2,3],childItem:[{link:"../report/common.html",title:"常规运动报告"},{link:"../report/aerobic.html",title:"515有氧能力测试报告"},{link:"../report/rockport.html",title:"Rockport测试报告"},{link:"../report/4min_walk.html",title:"跑步机四分钟走测试报告"}]},{icon:"icon-users",title:"客户管理",link:"#",permission:[1,2,3],childItem:[{link:"../customer/info.html",title:"客户信息"}]},{icon:"icon-pie-chart",title:"数据统计",link:"#",permission:[2],childItem:[{link:"../stats/stats.html",title:"数据统计报告"}]}],a=parseInt(window.localStorage.getItem("auClinic")),i=0;i<e.length;i++)if(-1!=e[i].permission.indexOf(a)){for(var t="",n=0;n<e[i].childItem.length;n++)t=t+'<li class="nav-item"><a href="'+e[i].childItem[n].link+'" class="nav-link "><span class="title">'+e[i].childItem[n].title+"</span></a></li>";if(0==e[i].childItem.length)var o='<li class="nav-item"><a href="'+e[i].link+'" class="nav-link nav-toggle"><i class="'+e[i].icon+'"></i><span class="title">'+e[i].title+"</span></a></li>";else var o='<li class="nav-item"><a href="'+e[i].link+'" class="nav-link nav-toggle"><i class="'+e[i].icon+'"></i><span class="title">'+e[i].title+'</span><span class="arrow"></span></a><ul class="sub-menu">'+t+"</ul></li>";$(o).appendTo(".page-sidebar-menu")}window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())},footerDomRender:function(){$('<div class="page-footer-inner">2016 &copy; 加动健康科技（深圳）有限公司</div><div class="scroll-to-top"><i class="icon-arrow-up"></i></div>').appendTo(".page-footer")},getWelcomeInfo:function(){var e=window.localStorage.getItem("userImgUrlClinic"),a=window.localStorage.getItem("userNickNameClinic");"undefined"==e||"null"==e?$(".welcome-userimg").attr("src","../../img/avatar_default.png"):$(".welcome-userimg").attr("src",e),"undefined"==a||"null"==a?$(".welcome-username").text("管理员"):$(".welcome-username").text(a)},bindEvent:function(){$(".page-sidebar-menu>li>a").on("click",function(e){e.preventDefault()}),$(".page-sidebar-menu>li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open"):($(".page-sidebar-menu>li").removeClass("open"),$(this).addClass("open")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-sidebar-menu>li .sub-menu>li").on("click",function(e){e.stopPropagation(),$(this).hasClass("active")||($(this).parents().find(".page-sidebar-menu>li>ul>li").removeClass("active"),$(this).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-logo .menu-toggler").on("click",function(){$(".page-sidebar").hasClass("closed")?($(".page-sidebar").removeClass("closed"),$(".page-content").removeClass("open"),$(".page-footer").removeClass("open"),$(".page-logo").removeClass("closed")):($(".page-sidebar").addClass("closed"),$(".page-content").addClass("open"),$(".page-footer").addClass("open"),$(".page-logo").addClass("closed")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html()),window.localStorage.setItem("localheaderDom",$(".page-header").html())}),$(".logout-btn").on("click",function(){window.localStorage.clear()})},locationSetActive:function(){-1!=window.location.href.indexOf("common")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("aerobic")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(1).addClass("active")),-1!=window.location.href.indexOf("rockport")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(2).addClass("active")),-1!=window.location.href.indexOf("4min_walk")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(3).addClass("active")),-1!=window.location.href.indexOf("info")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(1).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(1).find(".sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("stats")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(2).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(2).find(".sub-menu li").eq(0).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}},new i},24:function(e,a,i){e.exports=i(3)},3:function(e,a,i){"use strict";function t(){this.ajaxLoading=!1,this.init()}Object.defineProperty(a,"__esModule",{value:!0});var n=i(0),o=(i.n(n),i(1)),l=(i.n(o),i(2));i.n(l);t.prototype.init=function(){null==window.localStorage.getItem("utClinic")?($("html,body").html(""),window.location.href="../login.html"):(this.requestPage(),this.bind())},t.prototype.bind=function(){var e=this;$(".start-date-form i.fa-close").on("click",function(){$(this).parent().find("input").val(""),$(this).hide()}),$(".search-commit-btn").on("click",function(){""==$(".search-input").val()?e.requestPage():e.requestPage("",$(".search-input").val(),"")}),$(".search-input").on("keyup",function(a){13==a.keyCode&&(""==$(".search-input").val()?e.requestPage():e.requestPage("",$(".search-input").val(),""))})},t.prototype.requestPage=function(e,a,i){var t=this,n=window.location.search,o=n.indexOf("="),l=n.substr(o+1),s="";1==l?(s="statistical/getFourMinList",$(".filter-title").text("跑步机四分钟走测试报告(全部)")):2==l?(s="statistical/getFourMinCompleteList",$(".filter-title").text("跑步机四分钟走测试报告(信息完整)")):(s="statistical/getFourMinMissingList",$(".filter-title").text("跑步机四分钟走测试报告(信息缺失)"));var r=window.localStorage.getItem("utClinic"),d=window.localStorage.getItem("uidClinic");if(!this.ajaxLoading){this.ajaxLoading=!0;var p={userId:d,pageNo:e,pageSize:i,username:a,sort:window.localStorage.getItem("sortType")};$.ajax({url:window.urlHandler(s,d,r),method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(p)}).done(function(e){200==e.status&&($(".table-manager").find("tbody").html(""),$(".pagination").html(""),$(".table-mask-box").show(),t.renderTable(e),t.initPagination(e.data.pages)),t.ajaxLoading=!1,window.dataErrorHandler(e)}).fail(function(e){t.ajaxLoading=!1})}},t.prototype.renderTable=function(e){$(".table-mask-box").hide();var a=$(".table-manager").find("tbody"),i=e.data.list;if(0==i.length){var t="<tr><td>无相关记录</td><td>--</td><td>--</td><td>--</td><td>--</td><td>--</td></tr>";$(t).appendTo(a),$(".pagination-block").hide()}else{for(var n=0;n<i.length;n++){var t="<tr><td>"+window.nullFormat(i[n].commitDate)+"</td><td>"+i[n].username+"</td><td>"+window.formatSex(i[n].sex)+"</td><td>"+i[n].age+"</td><td>"+i[n].met+'MET</td><td><a class="report-detail" href="../report/4min_walk_detail.html" data-recordId="'+i[n].questionnaireRecordId+'" data-reportid="'+i[n].reportId+'" data-customeruuid="'+i[n].memberId+'">报告</a></td></tr>';$(t).appendTo(a)}$(".pagination-block").show();var o=e.data.pageNum;window.localStorage.setItem("pageNow",o)}this.theadSortEvent()},t.prototype.initPagination=function(e){$('<li class="pagination-prev"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>').appendTo($(".pagination")),this.pageLength=e;var a=parseInt(window.localStorage.getItem("pageNow"));if(e>5&&6!=e){if(a>=5&&a<=e-4){var i='<li><a href="#">1</a></li><li class="paitem-dot"><a href="#">...</a></li>';$(i).appendTo($(".pagination"));for(var t=a;t<a+3;t++){var n='<li><a href="#">'+t+"</a></li>";$(n).appendTo($(".pagination"))}var o='<li class="paitem-dot"><a href="#">...</a></li><li><a href="#">'+e+"</a></li>";$(o).appendTo($(".pagination"))}if(a<5){for(var t=1;t<=5;t++){var n='<li><a href="#">'+t+"</a></li>";$(n).appendTo($(".pagination"))}var o='<li class="paitem-dot"><a href="#">...</a></li><li><a href="#">'+e+"</a></li>";$(o).appendTo($(".pagination"))}if(a>=5&&a>e-4){var i='<li><a href="#">1</a></li><li class="paitem-dot"><a href="#">...</a></li>';$(i).appendTo($(".pagination"));for(var t=e-4;t<=e;t++){var n='<li><a href="#">'+t+"</a></li>";$(n).appendTo($(".pagination"))}}}else if(6==e)for(var t=1;t<=e;t++){var n='<li><a href="#">'+t+"</a></li>";$(n).appendTo($(".pagination"))}else for(var t=1;t<=e;t++){var n='<li><a href="#">'+t+"</a></li>";$(n).appendTo($(".pagination"))}$('<li class="pagination-next"><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>').appendTo($(".pagination")),this.paBind()},t.prototype.paBind=function(){var e=this;$(".pagination li").on("click",function(a){e.requestPage($(this).find("a").text(),$(".search-input").val(),e.pageSize),a.preventDefault()}),$(".pagination li:first").off("click"),$(".pagination li:last").off("click"),$(".paitem-dot").off("click"),$(".pagination-prev").on("click",function(a){a.preventDefault();var i=window.localStorage.getItem("pageNow");1!=i?e.requestPage(parseInt(i)-1,$(".search-input").val(),e.pageSize):swal({title:"提示",text:"已经是第一页了！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}),$(".pagination-next").on("click",function(a){a.preventDefault();var i=window.localStorage.getItem("pageNow");i!=e.pageLength?e.requestPage(parseInt(i)+1,$(".search-input").val(),e.pageSize):swal({title:"提示",text:"已经是最后一页了！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}),$(".paitem-dot").on("click",function(e){e.preventDefault()}),$(".pagination li").each(function(){$(this).text()==window.localStorage.getItem("pageNow")&&$(this).addClass("active")}),$(".page-index").on("keyup",function(a){13==a.keyCode&&e.requestPage($(".page-index-input").val(),$(".search-input").val(),e.pageSize),$(".page-index-input").val()>e.pageLength&&$(".page-index-input").val(e.pageLength)}),$(".page-index span").on("click",function(a){e.requestPage($(".page-index-input").val(),$(".search-input").val(),e.pageSize),$(".page-index-input").val()>e.pageLength&&$(".page-index-input").val(e.pageLength)}),$(".pagesize-selector").on("change",function(a){e.pageSize=$(this).val(),e.requestPage($(".page-index-input").val(),$(".search-input").val(),e.pageSize)}),$(".report-detail").on("click",function(){var e=$(this).attr("data-reportid"),a=$(this).attr("data-customeruuid");window.localStorage.setItem("reportId",e),window.localStorage.setItem("customerUUID",a);var i=$(this).attr("data-recordId");window.localStorage.setItem("data_recordId",i)})},t.prototype.resetSortType=function(){window.localStorage.removeItem("sortType")},t.prototype.theadSortEvent=function(){for(var e=this,a=["6@1","","","7@1","8@1"],i=["6@2","","","7@2","8@2"],t=0;t<a.length;t++)!function(t){$(".table-manager thead tr th").eq(t).off("click").on("click",function(){null==window.localStorage.getItem("sortType")?(window.localStorage.setItem("sortType",a[t]),e.requestPage("",$(".search-input").val(),e.pageSize),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort-desc")):window.localStorage.getItem("sortType")==i[t]?(e.resetSortType(),e.requestPage("",$(".search-input").val(),e.pageSize),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort")):window.localStorage.getItem("sortType")==a[t]?(window.localStorage.setItem("sortType",i[t]),e.requestPage("",$(".search-input").val(),e.pageSize),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort-asc"),$(this).addClass("down")):(window.localStorage.setItem("sortType",a[t]),e.requestPage("",$(".search-input").val(),e.pageSize),$(".table-manager thead tr th").find("i").removeClass().addClass("fa fa-sort"),$(this).find("i").addClass("fa fa-sort-desc"))})}(t)},new t}},[24]);