webpackJsonp([20],{14:function(t,o,n){"use strict";function i(){this.ajaxLoading=!1,this.accountOk=!1,this.passwordOk=!1,this.init()}Object.defineProperty(o,"__esModule",{value:!0});var e=n(1),a=(n.n(e),n(2));n.n(a);i.prototype.init=function(){null!=window.localStorage.getItem("utClinic")&&null!=window.localStorage.getItem("uidClinic")?window.location.href="report/4min_walk.html":this.bind()},i.prototype.bind=function(){var t=this;$(".account-input").on("keyup",function(){t.user=$(".account-input").val(),t.testAccount()}),$(".password-input").on("keyup",function(){t.pwd=$(".password-input").val(),t.testPassword()}),$(".login-form").on("keyup",function(o){13==o.keyCode&&t.postLogin()}),$(".login-button").on("click",function(){t.postLogin()})},i.prototype.testAccount=function(){var t=this,o=/^[A-z0-9][A-z0-9_]+@[A-z0-9_-]+\.[A-z]+$/i,n=/^1[34578]\d{9}$/g,i=/^[A-z0-9_]{3,15}$/g;o.test(t.user)||n.test(t.user)||i.test(t.user)?t.accountOk||($(".account-check-ok").show(),t.accountOk=!0):($(".account-check-ok").hide(),t.accountOk=!1)},i.prototype.testPassword=function(){var t=this;/^[A-z0-9_]{6,15}$/g.test(t.pwd)?t.passwordOk||($(".password-check-ok").show(),t.passwordOk=!0):($(".password-check-ok").hide(),t.passwordOk=!1)},i.prototype.postLogin=function(){var t=this;if(t.user=$(".account-input").val(),t.pwd=$(".password-input").val(),$(".login-button").addClass("loading"),""!=t.user&&""!=t.pwd){if(!t.ajaxLoading){t.ajaxLoading=!0;var o=window.simUrlHandler("login");$.ajax({url:o,method:"POST",data:{userName:t.user,password:window.encryptByDES(t.pwd)}}).done(function(o){t.ajaxLoading=!1,200==o.status&&(window.localStorage.setItem("auClinic",o.datas.author),window.localStorage.setItem("uidClinic",o.datas.uid),window.localStorage.setItem("utClinic",o.datas.ut),window.localStorage.setItem("userImgUrlClinic",o.datas.icon),window.localStorage.setItem("userNickNameClinic",o.datas.name),window.location.href="report/4min_walk.html"),500!=o.status&&501!=o.status&&505!=o.status||swal({title:"提示",text:"登录失败！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"}),502==o.status&&swal({title:"提示",text:"请输入正确的用户名和密码！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"}),503==o.status&&swal({title:"提示",text:"请输入正确的用户名和密码！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"}),504==o.status&&swal({title:"提示",text:"该账户已被冻结！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"}),511==o.status&&swal({title:"提示",text:"该账号已在其他地方登录！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"}),$(".login-button").removeClass("loading")}).fail(function(o){t.ajaxLoading=!1,$(".login-button").removeClass("loading")})}}else t.ajaxLoading=!1,swal({title:"提示",text:"该输入您的账号密码！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"}),$(".login-button").removeClass("loading")},new i},35:function(t,o,n){t.exports=n(14)}},[35]);