webpackJsonp([10],{0:function(e,t){function i(){this.init()}i.prototype={init:function(){this.domRender(),this.bindEvent()},domRender:function(){var e=window.localStorage.getItem("localSidebarDom"),t=window.localStorage.getItem("localheaderDom");null==e?(this.sidebarDomRender(),this.locationSetActive()):($(".page-sidebar-wrapper").html(""),$(e).appendTo(".page-sidebar-wrapper"),$(".page-sidebar").hasClass("closed")?$(".page-content").addClass("open"):$(".page-content").removeClass("open"),this.locationSetActive()),null==t?this.headerDomRender():($(".page-header").html(""),$(t).appendTo(".page-header")),this.footerDomRender()},headerDomRender:function(){$('<div class="page-header-inner "><div class="page-logo"><a href="../report/common.html"><img src="../../img/logo.png" alt="logo" class="logo-default"></a><div class="menu-toggler"><i class="fa fa-bars" style="color:#fff;font-size:2rem;"></i></div></div><div class="build-version">科研版</div><div class="welcome-func"><ul class="welcome-func-list"><li class="welcome-user"><img alt="" class="welcome-userimg img-circle" src="../../img/avatar_default.png"><span class="welcome-username"></span><ul class="welcome-user-menu"><li><i class="fa fa-question-circle"></i><a href="#">帮助</a></li><li class="logout-btn"><i class="fa fa-sign-out"></i><a href="../login.html">登出</a></li></ul></li></ul></div></div>').appendTo(".page-header"),this.getWelcomeInfo()},sidebarDomRender:function(){for(var e=[{icon:"icon-bar-chart",title:"运动报告管理",link:"#",permission:[1,2,3],childItem:[{link:"../report/common.html",title:"常规运动报告"},{link:"../report/aerobic.html",title:"515有氧能力测试报告"},{link:"../report/rockport.html",title:"Rockport测试报告"},{link:"../report/4min_walk.html",title:"跑步机四分钟走测试报告"}]},{icon:"icon-users",title:"客户管理",link:"#",permission:[1,2,3],childItem:[{link:"../customer/info.html",title:"客户信息"}]},{icon:"icon-pie-chart",title:"数据统计",link:"#",permission:[2],childItem:[{link:"../stats/stats.html",title:"数据统计报告"}]}],t=parseInt(window.localStorage.getItem("auClinic")),i=0;i<e.length;i++)if(-1!=e[i].permission.indexOf(t)){for(var n="",a=0;a<e[i].childItem.length;a++)n=n+'<li class="nav-item"><a href="'+e[i].childItem[a].link+'" class="nav-link "><span class="title">'+e[i].childItem[a].title+"</span></a></li>";if(0==e[i].childItem.length)var o='<li class="nav-item"><a href="'+e[i].link+'" class="nav-link nav-toggle"><i class="'+e[i].icon+'"></i><span class="title">'+e[i].title+"</span></a></li>";else var o='<li class="nav-item"><a href="'+e[i].link+'" class="nav-link nav-toggle"><i class="'+e[i].icon+'"></i><span class="title">'+e[i].title+'</span><span class="arrow"></span></a><ul class="sub-menu">'+n+"</ul></li>";$(o).appendTo(".page-sidebar-menu")}window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())},footerDomRender:function(){$('<div class="page-footer-inner">2016 &copy; 加动健康科技（深圳）有限公司</div><div class="scroll-to-top"><i class="icon-arrow-up"></i></div>').appendTo(".page-footer")},getWelcomeInfo:function(){var e=window.localStorage.getItem("userImgUrlClinic"),t=window.localStorage.getItem("userNickNameClinic");"undefined"==e||"null"==e?$(".welcome-userimg").attr("src","../../img/avatar_default.png"):$(".welcome-userimg").attr("src",e),"undefined"==t||"null"==t?$(".welcome-username").text("管理员"):$(".welcome-username").text(t)},bindEvent:function(){$(".page-sidebar-menu>li>a").on("click",function(e){e.preventDefault()}),$(".page-sidebar-menu>li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open"):($(".page-sidebar-menu>li").removeClass("open"),$(this).addClass("open")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-sidebar-menu>li .sub-menu>li").on("click",function(e){e.stopPropagation(),$(this).hasClass("active")||($(this).parents().find(".page-sidebar-menu>li>ul>li").removeClass("active"),$(this).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-logo .menu-toggler").on("click",function(){$(".page-sidebar").hasClass("closed")?($(".page-sidebar").removeClass("closed"),$(".page-content").removeClass("open"),$(".page-footer").removeClass("open"),$(".page-logo").removeClass("closed")):($(".page-sidebar").addClass("closed"),$(".page-content").addClass("open"),$(".page-footer").addClass("open"),$(".page-logo").addClass("closed")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html()),window.localStorage.setItem("localheaderDom",$(".page-header").html())}),$(".logout-btn").on("click",function(){window.localStorage.clear()})},locationSetActive:function(){-1!=window.location.href.indexOf("common")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("aerobic")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(1).addClass("active")),-1!=window.location.href.indexOf("rockport")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(2).addClass("active")),-1!=window.location.href.indexOf("4min_walk")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(3).addClass("active")),-1!=window.location.href.indexOf("info")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(1).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(1).find(".sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("stats")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(2).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(2).find(".sub-menu li").eq(0).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}},new i},29:function(e,t,i){e.exports=i(8)},8:function(e,t,i){"use strict";function n(){this.incident(),this.immediatelyCall(),this.bind(),this.call()}function a(e,t){if(e&&t)if(e=(e/100).toFixed(2),t>0&&e>0){var i=(t/e/e).toFixed(1);$(".bmi").text(i)}else $(".bmi").text("0");else $(".bmi").text("0")}function o(e){var t=".containerDiv"+e+" .verifyNumber-nd",i=!0;return $(t).each(function(e,t){var n=$(t);if(n){var a=n.val();if(!a||!/^(ND|\d+(.\d{1,2})?)$/i.test(a)){i=!1;var o=n.prev();o&&o.addClass("avtive")}}}),i}function s(e){var t=".containerDiv"+e+" .verifyNumber",i=!0;return $(t).each(function(e,t){var n=$(t);if(n){var a=n.val();if(!a||!/^[0-9]+$/.test(a)){i=!1;var o=n.prev();o&&o.addClass("avtive")}}}),i}Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),l=(i.n(r),i(1)),c=(i.n(l),i(2));i.n(c);n.prototype.immediatelyCall=function(){$(".form-control2").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"}),$(".form-control3").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"}),$(".form-control4").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"}),$(".form-control5").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"}),$(".form-control6").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"}),$(".form-control7").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"}),$(".form-control8").select2({placeholder:"点击选择",minimumResultsForSearch:-1,language:"zh-CN"})},n.prototype.incident=function(){$(".tab>ul>li").on("click",function(){$(this).parent().find("a").removeClass("active"),$(this).find("a").addClass("active")}),$(".tab>ul>li").on("click","a",function(){"临床问卷"==$(this).text()?($(".clinical-questionnaire").show(),$(".the-grouping").hide(),$(".summarize").hide()):"实验室检查及分组"==$(this).text()?($(".summarize").hide(),$(".clinical-questionnaire").hide(),$(".the-grouping").show()):"实验完成情况总结"==$(this).text()&&($(".the-grouping").hide(),$(".clinical-questionnaire").hide(),$(".summarize").show())})},n.prototype.judgeND=function(e){return"ND"==e.toUpperCase()?-99:e},n.prototype.transitionND=function(e){return-99==e?"ND":e},n.prototype.strData=function(){for(var e="",t=$("input[name='userNameInitial']"),i=0;i<t.length;i++)e+=t[i].value;var n=$(".filterDate").val(),a=$(".testNo").val(),o=$(".testDate").val(),s=window.localStorage.getItem("utClinic"),r=window.localStorage.getItem("uidClinic"),l=window.localStorage.getItem("customerUUID"),c={customerId:l,userNameInitial:e,filterDate:n,testNo:a,testDate:o};$.ajax({type:"POST",url:window.urlHandler("caseReport/saveMain",r,s),dataType:"json",data:JSON.stringify(c),contentType:"application/json",success:function(e){200==e.status?swal({title:"提示",text:"保存成功！",type:"success",showConfirmButton:!1,timer:2e3}):swal({title:"提示",text:e.info,type:"info",showConfirmButton:!0,confirmButtonText:"确定",confirmButtonColor:"#009CAA"})},error:function(){swal({title:"保存失败，请核查填入内容！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}})},n.prototype.clinicalQuestionnaire=function(){var e=this,t={type1:$("input[name='inclusionCriteria1']:checked").val(),type2:$("input[name='inclusionCriteria2']:checked").val(),type3:$("input[name='inclusionCriteria3']:checked").val(),type4:$("input[name='inclusionCriteria4']:checked").val(),type5:$("input[name='inclusionCriteria5']:checked").val(),type6:$("input[name='inclusionCriteria6']:checked").val()},i={type1:$("input[name='exclusionCriteria1']:checked").val(),type2:$("input[name='exclusionCriteria2']:checked").val(),type3:$("input[name='exclusionCriteria3']:checked").val(),type4:$("input[name='exclusionCriteria4']:checked").val(),type5:$("input[name='exclusionCriteria5']:checked").val()},n={type1:$("input[name='parQuestionnaire1']:checked").val(),type2:$("input[name='parQuestionnaire2']:checked").val(),type3:$("input[name='parQuestionnaire3']:checked").val(),type4:$("input[name='parQuestionnaire4']:checked").val(),type5:$("input[name='parQuestionnaire5']:checked").val(),type6:$("input[name='parQuestionnaire6']:checked").val(),type7:$("input[name='parQuestionnaire7']:checked").val()},a=$("input[name='parQuestionnaireComment']:checked").val(),o=$(".patientName").val(),s=$(".profession option:selected").val(),r=$(".age").val(),l=$(".contactInfo1").val(),c=$("input[name='sex-20']:checked").val(),u=$(".contactInfo2").val(),p=$(".familyAddress").val(),d=$("input[name='signConsent']:checked").val(),h=$(".signConsentDate").val(),m=$(".height").val(),v=$(".diabeticHistory").val(),g=$(".weight").val(),f=e.judgeND($(".restingHeartRate").val()),y=e.judgeND($(".glu").val()),k=e.judgeND($(".bp").val()),C=e.judgeND($(".hba1cBefore").val()),w=this.checkdToString($("input[name='sex-101']:checked")),b=this.checkdToString($("input[name='familyHistoryFather']:checked")),x=this.checkdToString($("input[name='familyHistoryMother']:checked")),I=$("input[name='everIll']:checked").val(),S=this.checkdToString($("input[name='symptomSign']:checked")),D=$(".smokingHistory option:selected").val(),T=$(".sleepQuality option:selected").val(),N=$(".movementSituation option:selected").val(),R=$(".dietSituation option:selected").val(),A=$(".likeSports option:selected").val(),F=this.checkdToString($("input[name='ofenDoSports']:checked")),M=$(".gtThirtyMinTimes").val(),q=$(".bmi").text(),B={type1:{checked:this.checkdToString($("input[name='sex-23']:checked")),other:$(".else-1").val()},type2:{checked:this.checkdToString($("input[name='sex-24']:checked")),other:$(".else-22").val()},type3:{checked:this.checkdToString($("input[name='sex-32']:checked")),other:$(".else-2").val()},type4:{checked:this.checkdToString($("input[name='sex-35']:checked")),other:$(".else-3").val()},type5:{checked:this.checkdToString($("input[name='sex-001']:checked")),other:null},type6:{checked:this.checkdToString($("input[name='sex-37']:checked")),other:$(".else-6").val()},type7:{checked:this.checkdToString($("input[name='sex-38']:checked")),other:$(".else-7").val()},type8:{checked:this.checkdToString($("input[name='sex-39']:checked")),other:$(".else-8").val()},type9:{checked:this.checkdToString($("input[name='sex-40']:checked")),other:$(".else-9").val()},other:$(".else-10").val(),no:this.checkdToString($("input[name='sex-41']:checked"))},j=this.checkdToString($("input[name='diabeticComplication']:checked")),O=$(".diabeticComplicationCustom").val(),H=window.localStorage.getItem("customerUUID"),Q={customerId:H,inclusionCriteria:t,exclusionCriteria:i,parQuestionnaire:n,parQuestionnaireComment:a,patientName:o,profession:s,age:r,contactInfo1:l,sex:c,contactInfo2:u,familyAddress:p,signConsent:d,signConsentDate:h,height:m,diabeticHistory:v,weight:g,restingHeartRate:f,glu:y,bp:k,bmiIndex:q,hba1cBefore:C,medicalHistory:w,familyHistoryFather:b,familyHistoryMother:x,everIll:I,symptomSign:S,smokingHistory:D,sleepQuality:T,movementSituation:N,dietSituation:R,likeSports:A,ofenDoSports:F,gtThirtyMinTimes:M,takeMedicineInfo:B,diabeticComplication:j,diabeticComplicationCustom:O},E=window.localStorage.getItem("utClinic"),L=window.localStorage.getItem("uidClinic"),H=window.localStorage.getItem("customerUUID");$.ajax({type:"POST",url:window.urlHandler("caseReport/saveQuestionnaire",L,E),dataType:"json",data:JSON.stringify(Q),contentType:"application/json",success:function(e){200==e.status?swal({title:"提示",text:"保存成功！",type:"success",showConfirmButton:!1,timer:2e3}):swal({title:"提示",text:e.info,type:"info",showConfirmButton:!0,confirmButtonText:"确定",confirmButtonColor:"#009CAA"})},error:function(){swal({title:"保存失败，请核查填入内容！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}})},n.prototype.renderInput=function(e,t,i){if(null!=i&&null!=i[e]){var n="input[name="+t+"]";$(n).eq(i[e]-1).attr("checked",!0)}},n.prototype.renderInput2=function(e,t,i,n){if(null!=n&&null!=n[e]){var a=n[e][t];if(null!=a){var o="input[name="+i+"]",s=$(o);if(s)for(var r=a.substr(1,a.length-2).split(","),l=0;l<r.length;l++)s.eq(parseInt(r[l])-1).attr("checked",!0)}}},n.prototype.renderOther2=function(e,t,i,n){if(null!=n&&null!=n[e]&&null!=n[e][t]){var a="input."+i,o=$(a);o&&o.val(n[e][t])}},n.prototype.renderInput3=function(e,t,i){if(null!=i&&null!=i[e]){var n=i[e];if(null!=n){var a="input[name="+t+"]",o=$(a);if(o)for(var s=n.substr(1,n.length-2).split(","),r=0;r<s.length;r++)o.eq(parseInt(s[r])-1).attr("checked",!0)}}},n.prototype.renderOther3=function(e,t,i){if(null!=i&&null!=i[e]){var n="input."+t,a=$(n);a&&a.val(i[e])}},n.prototype.getData=function(e){var t=this;this.renderInput("type1","inclusionCriteria1",e.inclusionCriteria),this.renderInput("type2","inclusionCriteria2",e.inclusionCriteria),this.renderInput("type3","inclusionCriteria3",e.inclusionCriteria),this.renderInput("type4","inclusionCriteria4",e.inclusionCriteria),this.renderInput("type5","inclusionCriteria5",e.inclusionCriteria),this.renderInput("type6","inclusionCriteria6",e.inclusionCriteria),this.renderInput("type1","exclusionCriteria1",e.exclusionCriteria),this.renderInput("type2","exclusionCriteria2",e.exclusionCriteria),this.renderInput("type3","exclusionCriteria3",e.exclusionCriteria),this.renderInput("type4","exclusionCriteria4",e.exclusionCriteria),this.renderInput("type5","exclusionCriteria5",e.exclusionCriteria),this.renderInput("type1","parQuestionnaire1",e.parQuestionnaire),this.renderInput("type2","parQuestionnaire2",e.parQuestionnaire),this.renderInput("type3","parQuestionnaire3",e.parQuestionnaire),this.renderInput("type4","parQuestionnaire4",e.parQuestionnaire),this.renderInput("type5","parQuestionnaire5",e.parQuestionnaire),this.renderInput("type6","parQuestionnaire6",e.parQuestionnaire),this.renderInput("type7","parQuestionnaire7",e.parQuestionnaire),e.parQuestionnaireComment&&$("input[name='parQuestionnaireComment']").eq(e.parQuestionnaireComment-1).attr("checked",!0),$(".patientName").val(e.patientName),$(".profession").val(e.profession).trigger("change"),$(".age").val(e.age),$(".contactInfo1").val(e.contactInfo1),$(".contactInfo2").val(e.contactInfo2),e.sex&&$("input[name='sex-20']").eq(e.sex-1).attr("checked",!0),$(".familyAddress").val(e.familyAddress),e.signConsent&&$("input[name='signConsent']").eq(e.signConsent-1).attr("checked",!0),$(".signConsentDate").val(e.signConsentDate),$(".height").val(e.height),a(e.height,e.weight),$(".diabeticHistory").val(e.diabeticHistory),$(".weight").val(e.weight),$(".restingHeartRate").val(t.transitionND(e.restingHeartRate)),$(".glu").val(t.transitionND(e.glu)),$(".bp").val(t.transitionND(e.bp)),$(".hba1cBefore").val(t.transitionND(e.hba1cBefore)),this.checkdToFun(e.medicalHistory,"sex-101"),this.checkdToFun(e.familyHistoryFather,"familyHistoryFather"),this.checkdToFun(e.familyHistoryMother,"familyHistoryMother"),e.everIll&&$("input[name='everIll']").eq(e.everIll-1).attr("checked",!0),this.checkdToFun(e.symptomSign,"symptomSign"),this.checkdToFun(e.diabeticComplication,"diabeticComplication"),$(".diabeticComplicationCustom").val(e.diabeticComplicationCustom),$(".smokingHistory").val(e.smokingHistory).trigger("change"),$(".sleepQuality").val(e.sleepQuality).trigger("change"),$(".movementSituation").val(e.movementSituation).trigger("change"),$(".dietSituation").val(e.dietSituation).trigger("change"),$(".likeSports").val(e.likeSports).trigger("change"),this.checkdToFun(e.ofenDoSports,"ofenDoSports"),$(".gtThirtyMinTimes").val(e.gtThirtyMinTimes),this.renderInput2("type1","checked","sex-23",e.takeMedicineInfo),this.renderOther2("type1","other","else-1",e.takeMedicineInfo),this.renderInput2("type2","checked","sex-24",e.takeMedicineInfo),this.renderOther2("type2","other","else-22",e.takeMedicineInfo),this.renderInput2("type3","checked","sex-32",e.takeMedicineInfo),this.renderOther2("type3","other","else-2",e.takeMedicineInfo),this.renderInput2("type4","checked","sex-35",e.takeMedicineInfo),this.renderOther2("type4","other","else-3",e.takeMedicineInfo),this.renderInput2("type5","checked","sex-001",e.takeMedicineInfo),this.renderInput2("type6","checked","sex-37",e.takeMedicineInfo),this.renderOther2("type6","other","else-6",e.takeMedicineInfo),this.renderInput2("type7","checked","sex-38",e.takeMedicineInfo),this.renderOther2("type7","other","else-7",e.takeMedicineInfo),this.renderInput2("type8","checked","sex-39",e.takeMedicineInfo),this.renderOther2("type8","other","else-8",e.takeMedicineInfo),this.renderInput2("type9","checked","sex-40",e.takeMedicineInfo),this.renderOther2("type9","other","else-9",e.takeMedicineInfo),this.renderOther3("other","else-10",e.takeMedicineInfo),this.renderInput3("no","sex-41",e.takeMedicineInfo),$(".hba1c").val(t.transitionND(e.hba1c)),$(".totalCholesterolLevel").val(t.transitionND(e.totalCholesterolLevel)),$(".triglyceride").val(t.transitionND(e.triglyceride)),$(".hdlcLevel").val(t.transitionND(e.hdlcLevel)),$(".fasting-blood-glucose ").val(t.transitionND(e.oneMonthGlu)),$(".proteinuria").val(t.transitionND(e.twoMonthAlbuminuria)),$(".serum-creatinine1").val(t.transitionND(e.twoMonthScr1)),$(".serum-creatinine2").val(t.transitionND(e.twoMonthScr2)),this.renderOtherExamination(e.otherExamination),e.normalEcg&&$("input[name='normalEcg']").eq(e.normalEcg-1).attr("checked",!0),e.haveClinicalMeaning&&$("input[name='haveClinicalMeaning']").eq(e.haveClinicalMeaning-1).attr("checked",!0),$(".ecgDesc").val(e.ecgDesc),e.testGroup&&$("input[name='testGroup']").eq(e.testGroup-1).attr("checked",!0),$(".triglycerideAfter").val(t.transitionND(e.triglycerideAfter)),$(".hdlcLevelAfter").val(t.transitionND(e.hdlcLevelAfter)),$(".hba1cAfter").val(t.transitionND(e.hba1cAfter)),$(".totalCholesterolLevelAfter").val(t.transitionND(e.totalCholesterolLevelAfter)),this.renderOtherExamination2(e.otherExaminationAfter),$(".lastTestDate").val(e.lastTestDate),e.exerciseRiskHappened&&$("input[name='exerciseRiskHappened']").eq(e.exerciseRiskHappened-1).attr("checked",!0),e.testFinished&&$("input[name='testFinished']").eq(e.testFinished-1).attr("checked",!0),1==e.exerciseRiskHappened&&t.renderNo(),e.exerciseRiskResolved&&$("input[name='exerciseRiskResolved']").eq(e.exerciseRiskResolved-1).attr("checked",!0),2==e.testFinished&&t.renderNoTwo(),$(".stopTestDate").val(e.stopTestDate),$("input[name='whoSuggestStop']").eq(e.whoSuggestStop-1).attr("checked",!0),$(".whoSuggestStopCustom").val(e.whoSuggestStopCustom),e.notFinishReason&&$("input[name='notFinishReason']").eq(e.notFinishReason-1).attr("checked",!0),$(".notFinishReasonCustom").val(e.notFinishReasonCustom)},$(".height").on("blur",function(){a($(".height").val(),$(".weight").val())}),$(".weight").on("blur",function(){a($(".height").val(),$(".weight").val());var e=$(this).prev();if(e){/^[0-9]+$/.test($(this).val())?e.removeClass("avtive"):e.addClass("avtive")}}),n.prototype.checkdToFun=function(e,t){if(null!=e)for(var i=e.substr(1,e.length-2),n=i.split(","),a="input[name="+t+"]",o=0;o<n.length;o++)$(a).eq(parseInt(n[o]-1)).attr("checked",!0)},n.prototype.checkdToString=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].value);return this.arrayToString(t)},n.prototype.arrayToString=function(e){return 0==e.length?"":","+e.join(",")+","},n.prototype.call=function(){var e=this,t=window.localStorage.getItem("utClinic"),i=window.localStorage.getItem("uidClinic"),n=window.localStorage.getItem("customerUUID"),a={customerId:n};$.ajax({type:"POST",url:window.urlHandler("caseReport/get",i,t),dataType:"json",contentType:"application/json",data:JSON.stringify(a),success:function(t){if(200==t.status){var i=t.datas;e.getDataS(i),e.getData(i)}},error:function(){swal({title:"保存失败，请核查填入内容！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}})},n.prototype.getOtherExaminationArr=function(e){for(var t=[],i=0;i<e.length;i++){var n=$(e[i]).val();""!=n&&null!=n&&t.push($(e[i]).val())}return t},n.prototype.renderOtherExamination=function(e){if(null!=e)for(var t=0;t<e.length;t++)if(null!=e[t]&&""!=e[t]){if(t>0){$('<li><span class="add-inspection-item-btn" style="width:22px;display:inline-block;"></span><span class="item-label" style="padding-right:13px;">其他检查项</span><input type="text" class="otherExamination" maxlength="100"></li>').appendTo(".other-inspection-items-list")}$(".other-inspection-items-list li").eq(t).find("input").val(e[t])}},n.prototype.renderOtherExamination2=function(e){if(null!=e)for(var t=0;t<e.length;t++)if(null!=e[t]&&""!=e[t]){if(t>0){$('<li><span class="add-inspection-item-btn2" style="width:22px;display:inline-block;"></span><span class="item-label" style="padding-right:13px;">其他检查项</span><input type="text" class="otherExamination2" maxlength="100"></li>').appendTo(".other-inspection-items-list2")}$(".other-inspection-items-list2 li").eq(t).find("input").val(e[t])}},n.prototype.requestToSave=function(){var e=window.localStorage.getItem("utClinic"),t=window.localStorage.getItem("uidClinic"),i=window.localStorage.getItem("customerUUID"),n={customerId:i,hba1c:this.judgeND($(".hba1c").val()),totalCholesterolLevel:this.judgeND($(".totalCholesterolLevel").val()),triglyceride:this.judgeND($(".triglyceride").val()),hdlcLevel:this.judgeND($(".hdlcLevel").val()),oneMonthGlu:this.judgeND($(".fasting-blood-glucose ").val()),twoMonthAlbuminuria:this.judgeND($(".proteinuria").val()),twoMonthScr1:this.judgeND($(".serum-creatinine1").val()),twoMonthScr2:this.judgeND($(".serum-creatinine2").val()),otherExamination:this.getOtherExaminationArr($(".otherExamination")),normalEcg:$("input[name='normalEcg']:checked").val(),haveClinicalMeaning:$("input[name='haveClinicalMeaning']:checked").val(),ecgDesc:$(".ecgDesc").val()};$.ajax({type:"POST",url:window.urlHandler("caseReport/saveInspection",t,e),dataType:"json",data:JSON.stringify(n),contentType:"application/json",success:function(e){200==e.status?swal({title:"提示",text:"保存成功！",type:"success",showConfirmButton:!1,timer:2e3}):swal({title:"提示",text:e.info,type:"info",showConfirmButton:!0,confirmButtonText:"确定",confirmButtonColor:"#009CAA"})},error:function(){swal({title:"保存失败，请核查填入内容！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}})},n.prototype.requestToSaveProject=function(){var e=$("input[name='testGroup']:checked").val(),t=window.localStorage.getItem("utClinic"),i=window.localStorage.getItem("uidClinic"),n=window.localStorage.getItem("customerUUID"),a={customerId:n,testGroup:e,testProject:4};$.ajax({type:"POST",url:window.urlHandler("caseReport/saveGroup",i,t),dataType:"json",data:JSON.stringify(a),contentType:"application/json",success:function(e){200==e.status?swal({title:"提示",text:"保存成功！",type:"success",showConfirmButton:!1,timer:2e3}):swal({title:"提示",text:e.info,type:"info",showConfirmButton:!0,confirmButtonText:"确定",confirmButtonColor:"#009CAA"})},error:function(){swal({title:"保存失败，请核查填入内容！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}})},n.prototype.summarizeFun=function(){var e=this,t=e.judgeND($(".triglycerideAfter").val()),i=e.judgeND($(".hdlcLevelAfter").val()),n=e.judgeND($(".hba1cAfter").val()),a=e.judgeND($(".totalCholesterolLevelAfter").val()),o=$(".lastTestDate").val(),s=$("input[name='exerciseRiskHappened']:checked").val(),r=$("input[name='testFinished']:checked").val(),l=$("input[name='exerciseRiskResolved']:checked").val(),c=$(".stopTestDate").val(),u=$("input[name='whoSuggestStop']:checked").val(),p=$(".whoSuggestStopCustom").val(),d=$("input[name='notFinishReason']:checked").val(),h=$(".notFinishReasonCustom").val(),m=window.localStorage.getItem("utClinic"),v=window.localStorage.getItem("uidClinic"),g=window.localStorage.getItem("customerUUID"),f={customerId:g,triglycerideAfter:t,hba1cAfter:n,hdlcLevelAfter:i,totalCholesterolLevelAfter:a,otherExaminationAfter:this.getOtherExaminationArr($(".otherExamination2")),lastTestDate:o,exerciseRiskHappened:s,testFinished:r,exerciseRiskResolved:l,stopTestDate:c,whoSuggestStop:u,whoSuggestStopCustom:p,notFinishReason:d,notFinishReasonCustom:h};$.ajax({type:"POST",url:window.urlHandler("caseReport/saveSummary",v,m),dataType:"json",data:JSON.stringify(f),contentType:"application/json",success:function(e){200==e.status?swal({title:"提示",text:"保存成功！",type:"success",showConfirmButton:!1,timer:2e3}):swal({title:"提示",text:e.info,type:"info",showConfirmButton:!0,confirmButtonText:"确定",confirmButtonColor:"#009CAA"})},error:function(){swal({title:"保存失败，请核查填入内容！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}})},n.prototype.getDataS=function(e){if(null!=e.userNameInitial){var t=e.userNameInitial.split("");$(".container ul li").eq(4).find("input").eq(0).val(t[0]),$(".container ul li").eq(4).find("input").eq(1).val(t[1]),$(".container ul li").eq(4).find("input").eq(2).val(t[2]),$(".container ul li").eq(4).find("input").eq(3).val(t[3])}$(".filterDate").val(e.filterDate),$(".testNo").val(e.testNo),$(".testDate").val(e.testDate)},n.prototype.renderNo=function(){var e="";e='<div class="whether-the-risk"><span class="lable-name">如发生运动风险，是否均已解决</span><input class="magic-radio" type="radio" name="exerciseRiskResolved" id="yes-52" value="1"/><label style="margin-right:11px;" for="yes-52">是</label><input class="magic-radio"  type="radio" name="exerciseRiskResolved" id="no-52" value="2"/><label for="no-52" style="margin-right:15px;">否</label><b>(如否，应监测运动风险直到稳定或解决)</b></div>',$(".risk-hide").append(e)},n.prototype.renderNoTwo=function(){var e="";e='<div class="risk-hide-tow" style="margin-left: 50px;"><li><p style="margin-top:1%;">如否请填写以下项目：</p><span class="lable-name">(1).患者中止试验日期</span><div class="start-date-form form-inline"><div class="daterange"><input type="text" class="form-control stopTestDate" name="start-date"><i style="color:#333;margin-right:0;" class="fa fa-close"></i><i style="color:#333;margin-right:0;" class="fa fa-calendar"></i></div></div></li><li><span class="lable-name">(2).首先提出中止试验的是(选择一个)</span></li><li style="margin-left:13%;"><input class="magic-radio" type="radio" name="whoSuggestStop" id="yes-54" value="1"/><label style="margin-right:15px;" for="yes-54">患者</label><input class="magic-radio"  type="radio" name="whoSuggestStop" id="no-54" value="2"/><label for="no-54" style="margin-right:15px;">实验研究者</label></li><li><p style="display:inline-block;margin-left:13%;">若为其他，请指明</p><input type="text" class="rests whoSuggestStopCustom"></li><li><span class="lable-name">(3).中止试验的主要原因(选择一个)</span></li><li style="margin-left:13%;"><input class="magic-radio" type="radio" name="notFinishReason" id="yes-55" value="1"/><label style="margin-right:15px;" for="yes-55">运动风险</label><input class="magic-radio"  type="radio" name="notFinishReason" id="no-56" value="2"/><label for="no-56" style="margin-right:15px;">违背试验方案</label><input class="magic-radio"  type="radio" name="notFinishReason" id="no-57" value="3"/><label for="no-57" style="margin-right:15px;">改善不佳</label><input class="magic-radio"  type="radio" name="notFinishReason" id="no-58" value="4"/><label for="no-58" style="margin-right:15px;">失访(包括受试者自行退出)</label><input class="magic-radio"  type="radio" name="notFinishReason" id="no-59" value="5"/><label for="no-59" style="margin-right:15px;">患者撤回知情同意书</label></li><li><p style="display:inline-block;margin-left:13%;">其他，其他原因</p><input type="text" class="rests notFinishReasonCustom"></li></div>',$(".reveal-tow").append(e);$(document).ready(function(){$(".stopTestDate").daterangepicker({autoUpdateInput:!1,singleDatePicker:!0,locale:{applyLabel:"确定",cancelLabel:"清空",fromLabel:"起始时间",toLabel:"结束时间",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}}),$(".stopTestDate").on("apply.daterangepicker",function(e,t){$(this).val(t.startDate.format("YYYY-MM-DD"))})})},$(".userNameInitial").blur(function(){var e="";this.value.match(/^[a-zA-Z]$/)||(this.value=e),e=this.value}),n.prototype.bind=function(){var e=this;$(".save-btn-1 a").on("click",function(t){t.preventDefault();$("input[name='testNo']").val();e.strData()}),$(".save-btn-2 a").on("click",function(t){t.preventDefault(),e.clinicalQuestionnaire()}),$(".verifyNumber-nd").on("blur",function(e){var t=$(this).prev();if(t){var i=$(this).val();i&&/^(ND|\d+(.\d{1,2})?)$/i.test(i)?t.removeClass("avtive"):t.addClass("avtive")}}),$(".verifyNumber-integer").on("blur",function(e){var t=$(this).prev();if(t){var i=$(this).val();i&&/^(ND|\d+([0-9])+$)/.test(i)?t.removeClass("avtive"):t.addClass("avtive")}}),$(".verifyNumber-nd2").on("blur",function(e){var t=$(this).parent().find(".lable-name");if(t){var i=$(this).val();i&&/^(ND|\d+(.\d{1,2})?)$/i.test(i)?t.removeClass("avtive"):t.addClass("avtive")}}),$(".verifyNumber").on("blur",function(e){var t=$(this).prev();if(t){/^[0-9]+$/.test($(this).val())?t.removeClass("avtive"):t.addClass("avtive")}}),$(".verifyNumber_decimals").on("blur",function(e){var t=$(this).prev();if(t){/^\d+(\.\d{1})?$/.test($(this).val())?t.removeClass("avtive"):t.addClass("avtive")}}),$("input[name='testNo']").on("blur",function(e){var t=$(this).val(),i=$(".testNoContent");t&&/^[0-9]+(([.]*[0-9]+)|[0-9]*)$/.test(t)?i.removeClass("avtive"):""==t?i.removeClass("avtive"):i.addClass("avtive")}),$(".save-btn-3 a").on("click",function(t){t.preventDefault(),o(3)&&s(3)&&e.requestToSave()}),$(".save-btn-4 a").on("click",function(t){t.preventDefault(),o(4)&&s(3)&&e.summarizeFun()}),$(".save-btn-5 a").on("click",function(t){t.preventDefault(),e.requestToSaveProject()}),$("#yes-51").on("click",function(){1==$("#yes-51").val()&&$(".whether-the-risk").length<1&&e.renderNo()}),$("#no-51").on("click",function(){2==$("#no-51").val()&&$(".whether-the-risk").remove()}),$("#no-53").on("click",function(){2==$("#no-53").val()&&$(".risk-hide-tow").length<1&&e.renderNoTwo()}),$("#yes-53").on("click",function(){1==$("#yes-53").val()&&$(".risk-hide-tow").remove()}),$(".add-inspection-item-btn").on("click",function(){if($(".other-inspection-items-list li").length<10){$('<li><span class="add-inspection-item-btn" style="width:22px;display:inline-block;"></span><span class="item-label" style="padding-right:13px;">其他检查项</span><input type="text" class="otherExamination" maxlength="100"></li>').appendTo(".other-inspection-items-list")}}),$(".add-inspection-item-btn2").on("click",function(){if($(".other-inspection-items-list2 li").length<10){$('<li><span class="add-inspection-item-btn2" style="width:22px;display:inline-block;"></span><span class="item-label" style="padding-right:13px;">其他检查项</span><input type="text" class="otherExamination2" maxlength="100"></li>').appendTo(".other-inspection-items-list2")}}),$(".serum-creatinine1").on("change",function(){var e=$(this).val();if("ND"==e.toUpperCase())$(".serum-creatinine2").val(e);else{/[\d]/g.test(e)?$(".serum-creatinine2").val((88.4*parseInt(e)).toFixed(0)):($(".serum-creatinine1").val(""),$(".serum-creatinine2").val(""))}}),$(".serum-creatinine2").on("change",function(){var e=$(this).val();if("ND"==e.toUpperCase())$(".serum-creatinine1").val(e);else{/[\d]/g.test(e)?$(".serum-creatinine1").val((parseInt(e)/88.4).toFixed(2)):($(".serum-creatinine1").val(""),$(".serum-creatinine2").val(""))}}),$(".without").on("click",function(){0==$(this).is("checked")&&$(".topic").attr("checked",!1)}),$(".topic").on("click",function(){0==$(this).is("checked")&&$(".without").attr("checked",!1)}),$(".without-tow").on("click",function(){0==$(this).is("checked")&&$(".topic-tow").attr("checked",!1)}),$(".topic-tow").on("click",function(){0==$(this).is("checked")&&$(".without-tow").attr("checked",!1)}),$(".chronic-heart").on("click",function(){0==$(this).is("checked")&&$(".check").attr("checked",!1)}),$(".check").on("click",function(){0==$(this).is("checked")&&$(".chronic-heart").attr("checked",!1)})},new n}},[29]);