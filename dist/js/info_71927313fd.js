webpackJsonp([7],{0:function(e,a){function i(){this.init()}i.prototype={init:function(){this.domRender(),this.bindEvent()},domRender:function(){var e=window.localStorage.getItem("localSidebarDom"),a=window.localStorage.getItem("localheaderDom");null==e?(this.sidebarDomRender(),this.locationSetActive()):($(".page-sidebar-wrapper").html(""),$(e).appendTo(".page-sidebar-wrapper"),$(".page-sidebar").hasClass("closed")?$(".page-content").addClass("open"):$(".page-content").removeClass("open"),this.locationSetActive()),null==a?this.headerDomRender():($(".page-header").html(""),$(a).appendTo(".page-header")),this.footerDomRender()},headerDomRender:function(){$('<div class="page-header-inner "><div class="page-logo"><a href="../report/common.html"><img src="../../img/logo.png" alt="logo" class="logo-default"></a><div class="menu-toggler"><i class="fa fa-bars" style="color:#fff;font-size:2rem;"></i></div></div><div class="build-version">科研版</div><div class="welcome-func"><ul class="welcome-func-list"><li class="welcome-user"><img alt="" class="welcome-userimg img-circle" src="../../img/avatar_default.png"><span class="welcome-username"></span><ul class="welcome-user-menu"><li><i class="fa fa-question-circle"></i><a href="#">帮助</a></li><li class="logout-btn"><i class="fa fa-sign-out"></i><a href="../login.html">登出</a></li></ul></li></ul></div></div>').appendTo(".page-header"),this.getWelcomeInfo()},sidebarDomRender:function(){for(var e=[{icon:"icon-bar-chart",title:"运动报告管理",link:"#",permission:[1,2,3],childItem:[{link:"../report/common.html",title:"常规运动报告"},{link:"../report/aerobic.html",title:"515有氧能力测试报告"},{link:"../report/rockport.html",title:"Rockport测试报告"},{link:"../report/4min_walk.html",title:"跑步机四分钟走测试报告"}]},{icon:"icon-users",title:"客户管理",link:"#",permission:[1,2,3],childItem:[{link:"../customer/info.html",title:"客户信息"}]},{icon:"icon-pie-chart",title:"数据统计",link:"#",permission:[2],childItem:[{link:"../stats/stats.html",title:"数据统计报告"}]}],a=parseInt(window.localStorage.getItem("auClinic")),i=0;i<e.length;i++)if(-1!=e[i].permission.indexOf(a)){for(var t="",o=0;o<e[i].childItem.length;o++)t=t+'<li class="nav-item"><a href="'+e[i].childItem[o].link+'" class="nav-link "><span class="title">'+e[i].childItem[o].title+"</span></a></li>";if(0==e[i].childItem.length)var n='<li class="nav-item"><a href="'+e[i].link+'" class="nav-link nav-toggle"><i class="'+e[i].icon+'"></i><span class="title">'+e[i].title+"</span></a></li>";else var n='<li class="nav-item"><a href="'+e[i].link+'" class="nav-link nav-toggle"><i class="'+e[i].icon+'"></i><span class="title">'+e[i].title+'</span><span class="arrow"></span></a><ul class="sub-menu">'+t+"</ul></li>";$(n).appendTo(".page-sidebar-menu")}window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())},footerDomRender:function(){$('<div class="page-footer-inner">2016 &copy; 加动健康科技（深圳）有限公司</div><div class="scroll-to-top"><i class="icon-arrow-up"></i></div>').appendTo(".page-footer")},getWelcomeInfo:function(){var e=window.localStorage.getItem("userImgUrlClinic"),a=window.localStorage.getItem("userNickNameClinic");"undefined"==e||"null"==e?$(".welcome-userimg").attr("src","../../img/avatar_default.png"):$(".welcome-userimg").attr("src",e),"undefined"==a||"null"==a?$(".welcome-username").text("管理员"):$(".welcome-username").text(a)},bindEvent:function(){$(".page-sidebar-menu>li>a").on("click",function(e){e.preventDefault()}),$(".page-sidebar-menu>li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open"):($(".page-sidebar-menu>li").removeClass("open"),$(this).addClass("open")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-sidebar-menu>li .sub-menu>li").on("click",function(e){e.stopPropagation(),$(this).hasClass("active")||($(this).parents().find(".page-sidebar-menu>li>ul>li").removeClass("active"),$(this).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}),$(".page-logo .menu-toggler").on("click",function(){$(".page-sidebar").hasClass("closed")?($(".page-sidebar").removeClass("closed"),$(".page-content").removeClass("open"),$(".page-footer").removeClass("open"),$(".page-logo").removeClass("closed")):($(".page-sidebar").addClass("closed"),$(".page-content").addClass("open"),$(".page-footer").addClass("open"),$(".page-logo").addClass("closed")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html()),window.localStorage.setItem("localheaderDom",$(".page-header").html())}),$(".logout-btn").on("click",function(){window.localStorage.clear()})},locationSetActive:function(){-1!=window.location.href.indexOf("common")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("aerobic")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(1).addClass("active")),-1!=window.location.href.indexOf("rockport")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(2).addClass("active")),-1!=window.location.href.indexOf("4min_walk")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li:first").addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li:first .sub-menu li").eq(3).addClass("active")),-1!=window.location.href.indexOf("info")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(1).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(1).find(".sub-menu li").eq(0).addClass("active")),-1!=window.location.href.indexOf("stats")&&($(".page-sidebar-menu>li").removeClass("open"),$(".page-sidebar-menu>li").eq(2).addClass("open"),$(".page-sidebar-menu>li .sub-menu li").removeClass("active"),$(".page-sidebar-menu>li").eq(2).find(".sub-menu li").eq(0).addClass("active")),window.localStorage.setItem("localSidebarDom",$(".page-sidebar-wrapper").html())}},new i},11:function(e,a,i){"use strict";function t(){this.ajaxLoading=!1,this.init()}Object.defineProperty(a,"__esModule",{value:!0});var o=i(0),n=(i.n(o),i(1)),l=(i.n(n),i(2));i.n(l);t.prototype.init=function(){null==window.localStorage.getItem("utClinic")?($("html,body").html(""),window.location.href="../login.html"):(this.requestPage(),this.theadSortEvent())},t.prototype.requestPage=function(e,a,i){var t=this,o=window.localStorage.getItem("utClinic"),n=window.localStorage.getItem("uidClinic");this.ajaxLoading||(this.ajaxLoading=!0,$.ajax({url:window.urlHandler("customer/list",n,o),method:"POST",data:{page:e,condition:a,pageSize:i,sortType:window.localStorage.getItem("sortType")}}).done(function(e){200==e.status&&($(".table-manager").find("tbody").html(""),$(".pagination").html(""),$(".table-mask-box").show(),t.renderTable(e.datas.customerList),t.initPagination(e.datas.customerList.pages)),window.dataErrorHandler(e),t.ajaxLoading=!1}).fail(function(e){t.ajaxLoading=!1}))},t.prototype.resetSortType=function(){window.localStorage.removeItem("sortType")},t.prototype.theadSortEvent=function(){var e=this;window.onbeforeunload=function(){e.resetSortType()};for(var a=["NICK_NAME_DESC","SEX_DESC","AGE_DESC","PHONE_DESC","HEIGHT_DESC","WEIGHT_DESC","LAST_COMMIT_TIME_ASC","MOTION_NUMBER_DESC"],i=["NICK_NAME_ASC","SEX_ASC","AGE_ASC","PHONE_ASC","HEIGHT_ASC","WEIGHT_ASC","LAST_COMMIT_TIME_DESC","MOTION_NUMBER_ASC"],t=0;t<a.length;t++)!function(t){$(".table-manager thead tr th").eq(t).off("click").on("click",function(){null==window.localStorage.getItem("sortType")?(window.localStorage.setItem("sortType",a[t]),e.requestPage("",$(".search-input").val(),e.pageSize,e.coachId),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort-desc")):window.localStorage.getItem("sortType")==i[t]?(e.resetSortType(),e.requestPage("",$(".search-input").val(),e.pageSize,e.coachId),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort")):window.localStorage.getItem("sortType")==a[t]?(window.localStorage.setItem("sortType",i[t]),e.requestPage("",$(".search-input").val(),e.pageSize,e.coachId),$(this).find("i").removeClass(),$(this).find("i").addClass("fa fa-sort-asc"),$(this).addClass("down")):(window.localStorage.setItem("sortType",a[t]),e.requestPage("",$(".search-input").val(),e.pageSize,e.coachId),$(".table-manager thead tr th").find("i").removeClass().addClass("fa fa-sort"),$(this).find("i").addClass("fa fa-sort-desc"))})}(t)},t.prototype.renderTable=function(e){$(".table-mask-box").hide();var a=$(".table-manager").find("tbody"),i=e.list;if(0==i.length){var t="<tr><td>无相关记录</td><td>--</td><td>--</td><td>--</td><td>--</td><td>--</td><td>--</td><td>--</td><td>--</td></tr>";$(t).appendTo(a),$(".pagination-block").hide()}else{for(var o=0;o<i.length;o++){var t="<tr><td>"+i[o].nick_name+"</td><td>"+window.formatSex(i[o].sex)+"</td><td>"+window.nullFormat(i[o].age)+"</td><td>"+window.nullFormat(i[o].phone)+"</td><td>"+window.nullFormat(i[o].height)+"cm</td><td>"+window.nullFormat(i[o].weight)+"kg</td><td>"+window.nullFormat(i[o].last_commit_time)+"</td><td>"+window.zeroFormat(i[o].motion_number)+'次</td><td><a class="info-history" href="info_history.html" data-uuid="'+i[o].uuid+'" data-customerid="'+i[o].id+'">查看</a>';$(t).appendTo(a)}$(".pagination-block").show();var n=e.pageNum;window.localStorage.setItem("pageNow",n)}this.bindEvent()},t.prototype.bindEvent=function(){var e=this;$(".info-history").on("click",function(){var e=$(this).attr("data-uuid"),a=$(this).attr("data-customerid");window.localStorage.setItem("customerUUID",e),window.localStorage.setItem("customerId",a)}),$(".info-editor").on("click",function(){var e=$(this).attr("data-uuid"),a=$(this).attr("data-customerid");window.localStorage.setItem("customerUUID",e),window.localStorage.setItem("customerId",a)}),$(".search-input").on("keyup",function(a){13==a.keyCode&&e.requestPage("",$(".search-input").val(),"")})},t.prototype.initPagination=function(e){$('<li class="pagination-prev"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>').appendTo($(".pagination")),this.pageLength=e;var a=parseInt(window.localStorage.getItem("pageNow"));if(e>5&&6!=e){if(a>=5&&a<=e-4){var i='<li><a href="#">1</a></li><li class="paitem-dot"><a href="#">...</a></li>';$(i).appendTo($(".pagination"));for(var t=a;t<a+3;t++){var o='<li><a href="#">'+t+"</a></li>";$(o).appendTo($(".pagination"))}var n='<li class="paitem-dot"><a href="#">...</a></li><li><a href="#">'+e+"</a></li>";$(n).appendTo($(".pagination"))}if(a<5){for(var t=1;t<=5;t++){var o='<li><a href="#">'+t+"</a></li>";$(o).appendTo($(".pagination"))}var n='<li class="paitem-dot"><a href="#">...</a></li><li><a href="#">'+e+"</a></li>";$(n).appendTo($(".pagination"))}if(a>=5&&a>e-4){var i='<li><a href="#">1</a></li><li class="paitem-dot"><a href="#">...</a></li>';$(i).appendTo($(".pagination"));for(var t=e-4;t<=e;t++){var o='<li><a href="#">'+t+"</a></li>";$(o).appendTo($(".pagination"))}}}else if(6==e)for(var t=1;t<=e;t++){var o='<li><a href="#">'+t+"</a></li>";$(o).appendTo($(".pagination"))}else for(var t=1;t<=e;t++){var o='<li><a href="#">'+t+"</a></li>";$(o).appendTo($(".pagination"))}$('<li class="pagination-next"><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>').appendTo($(".pagination")),this.paBind()},t.prototype.paBind=function(){var e=this;$(".pagination li").on("click",function(a){e.requestPage($(this).find("a").text(),$(".search-input").val(),e.pageSize,e.coachId),a.preventDefault()}),$(".pagination li:first").off("click"),$(".pagination li:last").off("click"),$(".paitem-dot").off("click"),$(".pagination-prev").on("click",function(a){a.preventDefault();var i=window.localStorage.getItem("pageNow");1!=i?e.requestPage(parseInt(i)-1,$(".search-input").val(),e.pageSize,e.coachId):swal({title:"提示",text:"已经是第一页了！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}),$(".pagination-next").on("click",function(a){a.preventDefault();var i=window.localStorage.getItem("pageNow");i!=e.pageLength?e.requestPage(parseInt(i)+1,$(".search-input").val(),e.pageSize,e.coachId):swal({title:"提示",text:"已经是最后一页了！",type:"info",showConfirmButton:!0,confirmButtonText:"确定",timer:2e3,confirmButtonColor:"#009CAA"})}),$(".paitem-dot").on("click",function(e){e.preventDefault()}),$(".pagination li").each(function(){$(this).text()==window.localStorage.getItem("pageNow")&&$(this).addClass("active")}),$(".page-index").on("keyup",function(a){13==a.keyCode&&e.requestPage($(".page-index-input").val(),$(".search-input").val(),e.pageSize,e.coachId),$(".page-index-input").val()>e.pageLength&&$(".page-index-input").val(e.pageLength)}),$(".page-index span").on("click",function(a){e.requestPage($(".page-index-input").val(),$(".search-input").val(),e.pageSize,e.coachId),$(".page-index-input").val()>e.pageLength&&$(".page-index-input").val(e.pageLength)}),$(".pagesize-selector").on("change",function(a){e.pageSize=$(this).val(),e.requestPage($(".page-index-input").val(),$(".search-input").val(),e.pageSize,e.coachId)})},new t},32:function(e,a,i){e.exports=i(11)}},[32]);